'use strict';(function(p){"object"==typeof exports&&"object"==typeof module?p(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],p):p(CodeMirror)})(function(p){function ca(p,q,n){return/^(?:operator|sof|keyword c|case|new|[\[{}\(,;:]|=>)$/.test(q.lastType)||"quasi"==q.lastType&&/\{\s*$/.test(p.string.slice(0,p.pos-(n||0)))}p.defineMode("javascript",function(qa,q){function n(a,c,b){A=a;J=b;return c}function w(a,c){var b=a.next();if('"'==b||"'"==b)return c.tokenize=
ra(b),c.tokenize(a,c);if("."==b&&a.match(/^\d+(?:[eE][+\-]?\d+)?/))return n("number","number");if("."==b&&a.match(".."))return n("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(b))return n(b);if("="==b&&a.eat(">"))return n("=>","operator");if("0"==b&&a.eat(/x/i))return a.eatWhile(/[\da-f]/i),n("number","number");if("0"==b&&a.eat(/o/i))return a.eatWhile(/[0-7]/i),n("number","number");if("0"==b&&a.eat(/b/i))return a.eatWhile(/[01]/i),n("number","number");if(/\d/.test(b))return a.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),
n("number","number");if("/"==b){if(a.eat("*"))return c.tokenize=K,K(a,c);if(a.eat("/"))return a.skipToEnd(),n("comment","comment");if(ca(a,c,1)){a:for(var d=c=!1;null!=(b=a.next());){if(!c){if("/"==b&&!d)break a;"["==b?d=!0:d&&"]"==b&&(d=!1)}c=!c&&"\\"==b}a.match(/^\b(([gimyu])(?![gimyu]*\2))+\b/);return n("regexp","string-2")}a.eatWhile(L);return n("operator","operator",a.current())}if("`"==b)return c.tokenize=R,R(a,c);if("#"==b)return a.skipToEnd(),n("error","error");if(L.test(b))return a.eatWhile(L),
n("operator","operator",a.current());if(S.test(b))return a.eatWhile(S),a=a.current(),(b=da.propertyIsEnumerable(a)&&da[a])&&"."!=c.lastType?n(b.type,b.style,a):n("variable","variable",a)}function ra(a){return function(c,b){var d=!1,e;if(M&&"@"==c.peek()&&c.match(sa))return b.tokenize=w,n("jsonld-keyword","meta");for(;null!=(e=c.next())&&(e!=a||d);)d=!d&&"\\"==e;d||(b.tokenize=w);return n("string","string")}}function K(a,c){for(var b=!1,d;d=a.next();){if("/"==d&&b){c.tokenize=w;break}b="*"==d}return n("comment",
"comment")}function R(a,c){for(var b=!1,d;null!=(d=a.next());){if(!b&&("`"==d||"$"==d&&a.eat("{"))){c.tokenize=w;break}b=!b&&"\\"==d}return n("quasi","string-2",a.current())}function T(a,c){c.fatArrowAt&&(c.fatArrowAt=null);var b=a.string.indexOf("=>",a.start);if(!(0>b)){for(var d=0,e=!1,b=b-1;0<=b;--b){var B=a.string.charAt(b),f="([{}])".indexOf(B);if(0<=f&&3>f){if(!d){++b;break}if(0==--d)break}else if(3<=f&&6>f)++d;else if(S.test(B))e=!0;else{if(/["'\/]/.test(B))return;if(e&&!d){++b;break}}}e&&
!d&&(c.fatArrowAt=b)}}function fa(a,b,e,d,f,B){this.indented=a;this.column=b;this.type=e;this.prev=f;this.info=B;null!=d&&(this.align=d)}function f(){for(var a=arguments.length-1;0<=a;a--)e.cc.push(arguments[a])}function b(){f.apply(null,arguments);return!0}function C(a){function b(c){for(;c;c=c.next)if(c.name==a)return!0;return!1}var k=e.state;e.marked="def";k.context?b(k.localVars)||(k.localVars={name:a,next:k.localVars}):!b(k.globalVars)&&q.globalVars&&(k.globalVars={name:a,next:k.globalVars})}
function D(){e.state.context={prev:e.state.context,vars:e.state.localVars};e.state.localVars=ta}function E(){e.state.localVars=e.state.context.vars;e.state.context=e.state.context.prev}function g(a,b){var k=function(){var d=e.state,k=d.indented;if("stat"==d.lexical.type)k=d.lexical.indented;else for(var f=d.lexical;f&&")"==f.type&&f.align;f=f.prev)k=f.indented;d.lexical=new fa(k,e.stream.column(),a,null,d.lexical,b)};k.lex=!0;return k}function h(){var a=e.state;a.lexical.prev&&(")"==a.lexical.type&&
(a.indented=a.lexical.indented),a.lexical=a.lexical.prev)}function m(a){function c(e){return e==a?b():";"==a?f():b(c)}return c}function r(a,c){return"var"==a?b(g("vardef",c.length),U,m(";"),h):"keyword a"==a?b(g("form"),l,r,h):"keyword b"==a?b(g("form"),r,h):"{"==a?b(g("}"),N,h):";"==a?b():"if"==a?("else"==e.state.lexical.info&&e.state.cc[e.state.cc.length-1]==h&&e.state.cc.pop()(),b(g("form"),l,r,h,ga)):"function"==a?b(v):"for"==a?b(g("form"),ua,r,h):"variable"==a?b(g("stat"),va):"switch"==a?b(g("form"),
l,g("}","switch"),m("{"),N,h,h):"case"==a?b(l,m(":")):"default"==a?b(m(":")):"catch"==a?b(g("form"),D,m("("),V,m(")"),r,h,E):"class"==a?b(g("form"),wa,h):"export"==a?b(g("stat"),xa,h):"import"==a?b(g("stat"),ya,h):"module"==a?b(g("form"),u,g("}"),m("{"),N,h,h):"async"==a?b(r):f(g("stat"),l,m(";"),h)}function l(a){return ha(a,!1)}function t(a){return ha(a,!0)}function ha(a,c){if(e.state.fatArrowAt==e.stream.start){var k=c?ia:ja;if("("==a)return b(D,g(")"),F(u,")"),h,m("=>"),k,E);if("variable"==a)return f(D,
u,m("=>"),k,E)}k=c?O:G;return za.hasOwnProperty(a)?b(k):"function"==a?b(v,k):"keyword c"==a||"async"==a?b(c?Aa:W):"("==a?b(g(")"),W,m(")"),h,k):"operator"==a||"spread"==a?b(c?t:l):"["==a?b(g("]"),Ba,h,k):"{"==a?H(X,"}",null,k):"quasi"==a?f(P,k):"new"==a?b(Ca(c)):b()}function W(a){return a.match(/[;\}\)\],]/)?f():f(l)}function Aa(a){return a.match(/[;\}\)\],]/)?f():f(t)}function G(a,c){return","==a?b(l):O(a,c,!1)}function O(a,c,e){var d=0==e?G:O,ea=0==e?l:t;if("=>"==a)return b(D,e?ia:ja,E);if("operator"==
a)return/\+\+|--/.test(c)?b(d):"?"==c?b(l,m(":"),ea):b(ea);if("quasi"==a)return f(P,d);if(";"!=a){if("("==a)return H(t,")","call",d);if("."==a)return b(Da,d);if("["==a)return b(g("]"),W,m("]"),h,d)}}function P(a,c){return"quasi"!=a?f():"${"!=c.slice(c.length-2)?b(P):b(l,Ea)}function Ea(a){if("}"==a)return e.marked="string-2",e.state.tokenize=R,b(P)}function ja(a){T(e.stream,e.state);return f("{"==a?r:l)}function ia(a){T(e.stream,e.state);return f("{"==a?r:t)}function Ca(a){return function(c){return"."==
c?b(a?Fa:Ga):f(a?t:l)}}function Ga(a,c){if("target"==c)return e.marked="keyword",b(G)}function Fa(a,c){if("target"==c)return e.marked="keyword",b(O)}function va(a){return":"==a?b(h,r):f(G,m(";"),h)}function Da(a){if("variable"==a)return e.marked="property",b()}function X(a,c){if("async"==a)return b(X);if("variable"==a||"keyword"==e.style)return e.marked="property","get"==c||"set"==c?b(Ha):b(I);if("number"==a||"string"==a)return e.marked=M?"property":e.style+" property",b(I);if("jsonld-keyword"==a)return b(I);
if("modifier"==a)return b(X);if("["==a)return b(l,m("]"),I);if("spread"==a)return b(l)}function Ha(a){if("variable"!=a)return f(I);e.marked="property";return b(v)}function I(a){if(":"==a)return b(t);if("("==a)return f(v)}function F(a,c){function k(d,h){return","==d?(d=e.state.lexical,"call"==d.info&&(d.pos=(d.pos||0)+1),b(function(b,d){return b==c||d==c?f():f(a)},k)):d==c||h==c?b():b(m(c))}return function(d,e){return d==c||e==c?b():f(a,k)}}function H(a,c,k){for(var d=3;d<arguments.length;d++)e.cc.push(arguments[d]);
return b(g(c,k),F(a,c),h)}function N(a){return"}"==a?b():f(r,N)}function Y(a){if(ka&&":"==a)return b(la)}function Ia(a,c){if("="==c)return b(t)}function la(a){if("variable"==a)return e.marked="variable-3",b(Z)}function Z(a,c){if("<"==c)return b(F(la,">"),Z);if("["==a)return b(m("]"),Z)}function U(){return f(u,Y,aa,Ja)}function u(a,c){if("modifier"==a)return b(u);if("variable"==a)return C(c),b();if("spread"==a)return b(u);if("["==a)return H(u,"]");if("{"==a)return H(Ka,"}")}function Ka(a,c){if("variable"==
a&&!e.stream.match(/^\s*:/,!1))return C(c),b(aa);"variable"==a&&(e.marked="property");return"spread"==a?b(u):"}"==a?f():b(m(":"),u,aa)}function aa(a,c){if("="==c)return b(t)}function Ja(a){if(","==a)return b(U)}function ga(a,c){if("keyword b"==a&&"else"==c)return b(g("form","else"),r,h)}function ua(a){if("("==a)return b(g(")"),La,m(")"),h)}function La(a){return"var"==a?b(U,m(";"),Q):";"==a?b(Q):"variable"==a?b(Ma):f(l,m(";"),Q)}function Ma(a,c){return"in"==c||"of"==c?(e.marked="keyword",b(l)):b(G,
Q)}function Q(a,c){return";"==a?b(ma):"in"==c||"of"==c?(e.marked="keyword",b(l)):f(l,m(";"),ma)}function ma(a){")"!=a&&b(l)}function v(a,c){if("*"==c)return e.marked="keyword",b(v);if("variable"==a)return C(c),b(v);if("("==a)return b(D,g(")"),F(V,")"),h,Y,r,E)}function V(a){return"spread"==a?b(V):f(u,Y,Ia)}function wa(a,c){if("variable"==a)return C(c),b(na)}function na(a,c){if("extends"==c)return b(l,na);if("{"==a)return b(g("}"),x,h)}function x(a,c){if("variable"==a||"keyword"==e.style){if("static"==
c)return e.marked="keyword",b(x);e.marked="property";return"get"==c||"set"==c?b(Na,v,x):b(v,x)}if("*"==c)return e.marked="keyword",b(x);if(";"==a)return b(x);if("}"==a)return b()}function Na(a){if("variable"!=a)return f();e.marked="property";return b()}function xa(a,c){return"*"==c?(e.marked="keyword",b(oa,m(";"))):"default"==c?(e.marked="keyword",b(l,m(";"))):f(r)}function ya(a){return"string"==a?b():f(ba,oa)}function ba(a,c){if("{"==a)return H(ba,"}");"variable"==a&&C(c);"*"==c&&(e.marked="keyword");
return b(Oa)}function Oa(a,c){if("as"==c)return e.marked="keyword",b(ba)}function oa(a,c){if("from"==c)return e.marked="keyword",b(l)}function Ba(a){return"]"==a?b():f(t,F(t,"]"))}var y=qa.indentUnit,pa=q.statementIndent,M=q.jsonld,z=q.json||M,ka=q.typescript,S=q.wordCharacters||/[\w$\xa1-\uffff]/,da=function(){function a(a){return{type:a,style:"keyword"}}var b=a("keyword a"),e=a("keyword b"),d=a("keyword c"),f=a("operator"),h={type:"atom",style:"atom"},b={"if":a("if"),"while":b,"with":b,"else":e,
"do":e,"try":e,"finally":e,"return":d,"break":d,"continue":d,"new":a("new"),"delete":d,"throw":d,"debugger":d,"var":a("var"),"const":a("var"),let:a("var"),"function":a("function"),"catch":a("catch"),"for":a("for"),"switch":a("switch"),"case":a("case"),"default":a("default"),"in":f,"typeof":f,"instanceof":f,"true":h,"false":h,"null":h,undefined:h,NaN:h,Infinity:h,"this":a("this"),"class":a("class"),"super":a("atom"),yield:d,"export":a("export"),"import":a("import"),"extends":d,await:d,async:a("async")};
if(ka){var e={type:"variable",style:"variable-3"},d={"interface":a("class"),"implements":d,namespace:d,module:a("module"),"enum":a("module"),"public":a("modifier"),"private":a("modifier"),"protected":a("modifier"),"abstract":a("modifier"),as:f,string:e,number:e,"boolean":e,any:e},g;for(g in d)b[g]=d[g]}return b}(),L=/[+\-*&%=<>!?|~^]/,sa=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/,A,J,za={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,"this":!0,"jsonld-keyword":!0},
e={state:null,column:null,marked:null,cc:null},ta={name:"this",next:{name:"arguments"}};h.lex=!0;return{startState:function(a){a={tokenize:w,lastType:"sof",cc:[],lexical:new fa((a||0)-y,0,"block",!1),localVars:q.localVars,context:q.localVars&&{vars:q.localVars},indented:a||0};q.globalVars&&"object"==typeof q.globalVars&&(a.globalVars=q.globalVars);return a},token:function(a,b){a.sol()&&(b.lexical.hasOwnProperty("align")||(b.lexical.align=!1),b.indented=a.indentation(),T(a,b));if(b.tokenize!=K&&a.eatSpace())return null;
var f=b.tokenize(a,b);if("comment"==A)return f;b.lastType="operator"!=A||"++"!=J&&"--"!=J?A:"incdec";a:{var d=A,h=J,g=b.cc;e.state=b;e.stream=a;e.marked=null;e.cc=g;e.style=f;b.lexical.hasOwnProperty("align")||(b.lexical.align=!0);for(;;)if((g.length?g.pop():z?l:r)(d,h)){for(;g.length&&g[g.length-1].lex;)g.pop()();if(e.marked){f=e.marked;break a}if(a="variable"==d)b:{for(a=b.localVars;a;a=a.next)if(a.name==h){a=!0;break b}for(b=b.context;b;b=b.prev)for(a=b.vars;a;a=a.next)if(a.name==h){a=!0;break b}a=
void 0}if(a){f="variable-2";break a}break a}}return f},indent:function(a,b){if(a.tokenize==K)return p.Pass;if(a.tokenize!=w)return 0;var e=b&&b.charAt(0),d=a.lexical;if(!/^\s*else\b/.test(b))for(var f=a.cc.length-1;0<=f;--f){var g=a.cc[f];if(g==h)d=d.prev;else if(g!=ga)break}"stat"==d.type&&"}"==e&&(d=d.prev);pa&&")"==d.type&&"stat"==d.prev.type&&(d=d.prev);f=d.type;g=e==f;return"vardef"==f?d.indented+("operator"==a.lastType||","==a.lastType?d.info+1:0):"form"==f&&"{"==e?d.indented:"form"==f?d.indented+
y:"stat"==f?(e=d.indented,a="operator"==a.lastType||","==a.lastType||L.test(b.charAt(0))||/[,.]/.test(b.charAt(0)),e+(a?pa||y:0)):"switch"!=d.info||g||0==q.doubleIndentSwitch?d.align?d.column+(g?0:1):d.indented+(g?0:y):d.indented+(/^(?:case|default)\b/.test(b)?y:2*y)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:z?null:"/*",blockCommentEnd:z?null:"*/",lineComment:z?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:z?"json":"javascript",jsonldMode:M,jsonMode:z,
expressionAllowed:ca,skipExpression:function(a){var b=a.cc[a.cc.length-1];b!=l&&b!=t||a.cc.pop()}}});p.registerHelper("wordChars","javascript",/[\w$]/);p.defineMIME("text/javascript","javascript");p.defineMIME("text/ecmascript","javascript");p.defineMIME("application/javascript","javascript");p.defineMIME("application/x-javascript","javascript");p.defineMIME("application/ecmascript","javascript");p.defineMIME("application/json",{name:"javascript",json:!0});p.defineMIME("application/x-json",{name:"javascript",
json:!0});p.defineMIME("application/ld+json",{name:"javascript",jsonld:!0});p.defineMIME("text/typescript",{name:"javascript",typescript:!0});p.defineMIME("application/typescript",{name:"javascript",typescript:!0})});
